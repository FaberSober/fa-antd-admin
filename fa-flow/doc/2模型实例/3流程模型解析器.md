# 流程模型解析器

# **流程模型解析器**

> 流程模型解析器 ProcessModelParser 负责模型文本与模型对象 ProcessModel 对象之间的映射解析， 默认模型采用 json 格式存储，内置实现 DefaultProcessModelParser 调用json解析处理器 FlowJsonHandler 解析并缓存。
> 

# **模型解析流程图**

> 描述流程模型 JSON 字符串之间的转换关系
> 

![](https://flowlong.aizuda.com/imgs/modelParser.png)

# **流程模型解析接口**

```java
public interface ProcessModelParser {

    /**
     * 流程模型 JSON 解析
     *
     * @param content  模型内容 JSON 格式
     * @param cacheKey 缓存 KEY
     * @param redeploy 重新部署 true 是 false 否
     * @return 流程模型
     */
    ProcessModel parse(String content, String cacheKey, boolean redeploy);

    /**
     * 使缓存失效
     *
     * @param cacheKey 缓存 KEY
     */
    void invalidate(String cacheKey);

    /**
     * 流程缓存实现类
     */
    FlowCache getFlowCache();
}
```

# **流程json解析处理器**

> 配合默认流程模型解析器 DefaultProcessModelParser 实现 json 文本格式的解析。 默认内置 FlowJacksonHandler 实现采用 jackson 组件库，当然你也可以换成 fastjson 等其它组件。
> 

```java
public interface FlowJsonHandler {

    /**
     * 对象转换为 JSON 字符串
     *
     * @param object 待转换对象
     * @return JSON 内容
     */
    String toJson(Object object);

    /**
     * JSON 字符串传转为 clazz 类型对象
     *
     * @param jsonString 待转换对象的JSON字符串
     * @param clazz      待转换对象类
     * @return 转化对象
     */
    <T> T fromJson(String jsonString, Class<T> clazz);
}
```