# 任务提醒

# **任务提醒**

- 注意 `定时调度` 开启后提醒才能生效。

> 该功能可用于任务审批提前通知，定时任务流程提醒超时处理类 FlowLongScheduler 实现扫描实时任务，根据任务提醒时间 remindTime 判断是否需要调用 TaskReminder 提醒接口
> 

# **提醒接口**

- 实现提醒接口 `TaskReminder` 返回参数 `Date` 决定是否进入下一个提醒周期。

```java
public interface TaskReminder {

    /**
     * 提醒操作
     *
     * @param context     流程引擎上下文
     * @param instanceId  流程实例ID
     * @param currentTask 当前待处理任务
     * @return 返回下次提醒时间，如果返回 null 当前任务将不再提醒，非 null 会更新下次提醒日期
     */
    Date remind(FlowLongContext context, Long instanceId, FlwTask currentTask);
}
```

# **`SpringBoot`实现案例**

> 需要注意的是下次提醒日期，必须为当前时间之后的日期。
> 

```java
/**
 * 注入自定义任务提醒处理类
 * 注解 EnableScheduling 必须启动
 */
@Component
@EnableScheduling
public class TestTaskReminder implements TaskReminder {

    @Override
    public Date remind(FlowLongContext context, Long instanceId, FlwTask currentTask) {
        System.out.println("测试提醒：" + instanceId);

        // 一天后继续提醒，直到用户处理完
        return DateUtils.toDate(DateUtils.now().plusDays(1));
    }
}
```